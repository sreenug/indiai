<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    
    <title>IndiaI-Add School</title>

    <!-- Bootstrap core CSS -->
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.0/css/jquery.dataTables.css">

    <!-- Custom styles for this template -->
    <style type="text/css">
		
		html, body, #map {
        height: 100%;
        margin: 0px;
        padding: 0px
      }
	  html, body, .container { height: 100% }

	</style>
	
	<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
    <script>
function initialize() {
var center = new google.maps.LatLng(25.599859, 085.137111);
  var mapOptions = {
    zoom: 20,
	center:center
  };

  var map = new google.maps.Map(document.getElementById('map'),
      mapOptions);

  var kmlLayer = new google.maps.KmlLayer({
    url: 'http:\/\/indiai.org\/data\/india_institute_patna_school_gis_map.kml',
    map: map
  });

}

google.maps.event.addDomListener(window, 'load', initialize);

    </script>

  </head>

  <body>

    <!-- Fixed navbar -->
    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#mapmyschool-desc">
		  <img style="width:140px; margin-top:-15px;" src="https://s3-us-west-2.amazonaws.com/indiai/map+my+logo.png"></a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li class="active"><a  title="$.scrollTo( '#school', 1800, {easing:'elasout'} );" href="#school" id="add-school" >Add School</a></li>
			<li ><a title="$.scrollTo( '#mapmyschool-about', 1800, {easing:'elasout'} );" href="#mapmyschool-about" id="project" >Campaign</a></li>
			<li ><a title="$.scrollTo( '#map', 1800, {easing:'elasout'} );" href="#map" >Map</a></li>
			<li ><a title="$.scrollTo( '#school-directory', 1800, {easing:'elasout'} );" href="#school-directory" >School Directory</a></li>
            
          </ul>
          <ul class="nav pull-right">
            <li class="pull-right"><a class="navbar-brand" href="http://www.indiai.org" target="_blank">
          <img style="width:140px;" src="http://indiai.org/wp-content/uploads/2014/04/indiai-logo-20140415.jpg"></a></li>
          </ul>          
        </div><!--/.nav-collapse -->
      </div>
    </div>

    <div class="container">
	<div id="school" style="margin-top:40px;">
	
      {% if form.errors %}
                        {% for error in form.non_field_errors %}
                            <p>{{error}}</p>
                        {% endfor %}
      {% endif %}
      <!-- Main component for a primary marketing message or call to action -->
      <div class="jumbotron">
        <form class="form-horizontal" id="school_form" role="form" action="/" method="POST" enctype="multipart/form-data">
			{% csrf_token %}
			{% load app_tags %}
			{% for f in form %}
			 {% if f.label == "Other Language" %}
			     <div class="form-group" id="language" style="display: none;">
			 {% else %}
			     <div class="form-group">
			 {% endif %}
					<label for="{{f.label}}" class="col-sm-2 control-label">{{f.label}}</label>
					<div class="col-sm-10">
						{{ f|placeholder:f.label }}
						{% if f.help_text %}
                        <span class="help-block" style="margin-bottom:0px;">{{f.help_text}}</span>
                        {% endif %}
					</div>
					
				
			</div>
			{% endfor %}
			<div class="form-group">
				<div class="col-sm-offset-2 col-sm-10">
					<button class="btn btn-lg btn-primary" type="submit">Submit</button>
				</div>
			</div>
		</form>        
      </div>

    </div> <!-- /container -->
<div id="mapmyschool-about" class="well" style="background-color:#fafafa; "><div style="height:20px;"></div><h3>Campaign</h3><p>Map My School is an ambitious campaign to map all schools in India. At least 13 lakh schools cater to 18.59 crore school going children in India. We spend, on an average, INR 45,969 crore each year to educate our children of which INR 25,000 crore goes to building new schools. Yet, there is no comprehensive data or map of all the schools. Therefore, Map My School is conceived as an important initiative by India Insitute, a not for profit research and advocacy organization based in New Delhi. When we mapped the schools in one city, we realized that there were many benefits to the initiative. Not only did the map provide the government with accurate data to help their planning but schools also received increased exposure to potential students free of cost. This map is also a very useful resource for parents who can now make a more informed school choice for their wards, thus benefiting all stakeholders.
The Map My School campaign is a model based on crowd sourcing of information. We categorize different schools on the basis of terminal level, medium of instruction and affordability and, in stages, will cover almost all schools in India. The procedure for schools to participate in this innovative exercise is very simple.</p>
<ul><li>Fill out a small form that does not require any sensitive information.</li>
<li>The information asked for would be readily available with you and does not require any collation.</li>
<li>Just ensure that you fill this form from a computer or mobile phone from within the school premises as the form automatically notes the GPS coordinates to display your school on our GPS map.</li></ul>
<p>For a better understanding of the final outcome of this campaign, please find below a map of schools in Patna where we have already completed the process. This unique initiative requires your participation to succeed. We request you to kindly share the form with other schools as well. Thank you for your co-operation.</p></div>
<div id="map" style="width:100%; height:100%;"></div>
<div id="school-directory" style=" clear:both ; margin-top:50px;">

			
	<table class="table" cellspacing="0" cellpadding="0" border="0" class="display" id="Table1" style="margin-bottom:20px;">
    <tbody>
		<tr><h4> Search Schools By </h4></tr>
       <tr id="filter_global">
           <td style="margin-left:2px;" align="center" id="schoolName"></td>
		   <td style="margin-left:2px;" align="center" id="lowerclass"></td>
		   <td style="margin-left:2px;" align="center" id="higherclass"></td>
			<td style="margin-left:2px;" align="center" id="address"></td>
           <td style="margin-left:2px;" align="center" id="pincode"></td>
		   <td style="margin-left:2px;" align="center" id="medium"></td>
           <td style="margin-left:2px;" align="center" id="recognition"></td>
           <td style="margin-left:2px;" align="center" id="management"></td>
           <td style="margin-left:2px;" align="center" id="cost"></td>
       </tr>
   </tbody>
</table>
			
			<!--<p id="schoolName">Search Name</p>
				<p id="address">Address</p>
                <p id="pincode">Pincode</p>
				<p id="recognition">Recognition Status</p>
                <p id="management">Management Type</p>
				<p id="cost">Cost of School</p>-->
				
	<table id="example" class="display" cellspacing="0">
        <thead>
            <tr>
                <th>School Name</th>
				<th>Lower Class</th>
				<th>Higher Class</th>
				<th>Address</th>
                <th>Pincode</th>
				<th>Medium of Instruction</th>
				<th>Recognition Status</th>
                <th>Management Type</th>
				<th>Cost of School</th>
            </tr>
        </thead>
		
		<!--<tfoot>
            <tr>
			<th>Search Name</th>
				<th>Lowest Class</th>
				<th>Highest Class</th>
				<th>Search Address</th>
                <th>Pincode</th>
				<th>Medium of Instruction</th>
				<th>Recognition Status</th>
                <th>Management Type</th>
				<th>Cost of School</th>
		</tr>
        </tfoot>-->
    </table>
  
</div>


</div><!-- container-->

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.0/js/jquery.dataTables.js"></script>
	<script src="http://jquery-datatables-column-filter.googlecode.com/svn/trunk/media/js/jquery.dataTables.columnFilter.js"></script>
    <!-- Latest compiled and minified JavaScript -->
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
	<script src="//ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.min.js"></script>
	<script type="text/javascript" src="http://demos.flesler.com/jquery/scrollTo/js/jquery.scrollTo-min.js?1.4.11"></script>
	<script type="text/javascript">
        $(document).ready ( function(){
            var lat, lng;
			//$("#map").hide();
            navigator.geolocation.getCurrentPosition(function(position)
            { 
                lat = position.coords.latitude;
                lng = position.coords.longitude;
                console.log( lat + ":" + lng);
                $("input#id_latitude").val(lat);
                $("input#id_longitude").val(lng);
            });
			
			
			$("#school_form").validate({
				rules: {
					name: {
						required: true,
						minlength: 2,
						maxlength: 200						
					},
					min_fee: {
						required: true,
						min: 0,												
					},
					max_fee: {
						required: true,
						min: 0,												
					},
					establishment: {
						required: true,
						minlength: 4,
						maxlength: 4,
						min: 1800						
					},
					recognition: {
						minlength: 4,
						maxlength: 4,
						min: 1800						
					},
					lowest_class: "required",
					highest_class: "required",
					recognized: "required",
					management_type: "required",
					medium_of_instruction : "required",
					street_address_1: "required",
					street_address_2: "required",
					city: "required",
					state: "required",
					pincode: {
						required: true,
						minlength: 6,
						maxlength: 6					
					}
				},
				messages: {
					name: {
						required: 'Name is required',
						minlength: 'Min allowed length for name is 2 chars',
						maxlength: 'Max allowed length for name is 200 chars'					
					},
					min_fee: {
						required: 'Minimum Monthly Fee is required',
						min: 'Minimum Value is zero',												
					},
					max_fee: {
						required: 'Maximum Monthly Fee is required',
						min: 'Minimum Value is zero',												
					},
					establishment: {
						required: 'Year of establishment is required',
						minlength: 'Should be only 4 characters',
						maxlength: 'Should be only 4 characters',
						min: 'Year should be greater than 1800'						
					},
					recognition: {
						minlength: 'Should be only 4 characters',
						maxlength: 'Should be only 4 characters',
						min: 'Year should be greater than 1800'							
					},
					lowest_class: "Enter Lowest Class",
					highest_class: "Enter Highest Class",
					recognized: "Enter Recognized",
					management_type: "Enter Management Type",
					medium_of_instruction : "Enter Medium of instructions",
					street_address_1: "Enter Street Address Line 1",
					street_address_2: "Enter Street Address Line 2",
					city: "Enter Street City",
					state: "Enter State",
					recognition: {
						required: 'Pincode is required',
						minlength: 'Should be only 6 characters',
						maxlength: 'Should be only 6 characters'						
					}
				},
				highlight: function(element, errorClass, validClass) {
					$(element)
						.parent('div')
						.parent('div')
						.addClass("has-error");

				},
				unhighlight: function(element, errorClass, validClass) {
					$(element)
						.parent('div')
						.parent('div')
						.removeClass("has-error");

				},
			});
			
			$("#id_medium_of_instruction").change(function() {
	            if($("#id_medium_of_instruction").val() == "Other")
	                {
	                   $("#language").show();	       
	                   $('#id_other_language').attr('placeholder','Please Specify Here');
	                }
	            else{
	                $("#language").hide();
	            }
	            });
			
			
			$("#add-school").click ( function() {
				jQuery(this).parent('li').addClass('active');
				jQuery("#project").parent('li').removeClass('active');
			});
			$("#project").click ( function() {
				jQuery(this).parent('li').addClass('active');
				jQuery("#add-school").parent('li').removeClass('active');
			});
			$('#example').dataTable( {
		        "ajax": "excel/"
		    } ).columnFilter({sPlaceHolder: "head:before",
			aoColumns:[
				{ sSelector: "#schoolName"  },
				{ sSelector: "#lowerclass"  },
				{ sSelector: "#higherclass"  },
				{ sSelector: "#address" },
				{ sSelector: "#pincode" },
				{ sSelector: "#medium"  },
				{ sSelector: "#recognition", type:"select", values : ["recognised", "unrecognized"] },
				{ sSelector: "#management" },
				{ sSelector: "#cost" }
				]
			});	
			
        });

    </script>
    
	
  </body>
</html>
